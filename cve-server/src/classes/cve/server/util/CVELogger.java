package cve.server.util;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

/**
 * Allows turn on/off logger by typing a character specified by
 * <code>LOGGER_STATE_CHAR</code> on the console.
 * 
 * @author Rasika Ranaweera
 * 
 */
public class CVELogger implements Runnable {

	/** logging is controlled by this character(s) */
	public static final String LOGGER_STATE_CHAR = "l";
	/** can be used to stop the console reader if there is any need */
	private static final String APP_STOP_CHAR = "x";
	// keeps track of logging state
	private static boolean isLoggingOn = false;

	@Override
	public void run() {
		String line = "";
		BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
		// loop until stop is requested
		while (!line.equals(APP_STOP_CHAR)) {
			try {
				line = reader.readLine();
				if (line.equals(LOGGER_STATE_CHAR)) {
					// toggle between
					isLoggingOn = !isLoggingOn;
				}
			} catch (IOException ioException) {
				System.err.println(ioException.getMessage());
			}
		}
	}

	/**
	 * Returns the current state of the logger
	 */
	public static boolean isLoggingOn() {
		return isLoggingOn;
	}
}
